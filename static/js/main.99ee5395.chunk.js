(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{125:function(e,t,a){e.exports=a(307)},130:function(e,t,a){},306:function(e,t,a){},307:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),i=a(21),r=a.n(i),c=(a(130),a(15)),o=a(22),l=a(17),u=a(16),d=a(19),m=a(18),p=a(70),h=a(124),f=a(116),y=a.n(f),g=a(24),v=a.n(g),b=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"tokenRequestUrl",value:function(){return"https://accounts.spotify.com/authorize?client_id=4a12399447fb43f3a7e85bde067b6743&redirect_uri=http://andyhoang1994.github.io/music_recommender&response_type=token"}},{key:"render",value:function(){return s.a.createElement(v.a,{variant:"contained",color:"primary",className:"get_token",target:"",href:this.tokenRequestUrl()},"Authorize Spotify App")}}]),t}(n.Component),S=a(40),E=a.n(S),k=(a(216),a(27)),j=a.n(k),O=a(41),C=a.n(O),N=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props.acousticness,a=this.props.danceability,n=this.props.energy,i=this.props.instrumentalness,r=this.props.valence;return s.a.createElement("div",{className:"sliderContainer"},s.a.createElement(C.a,{title:"Acousticness is a confidence measure of whether a track is acoustic or not"},s.a.createElement("div",null,s.a.createElement(j.a,{disableAnimation:!0,className:"slider"},"Acousticness: ",this.props.acousticness),s.a.createElement(E.a,{minValue:0,maxValue:1,step:.01,value:t,formatLabel:function(e){return""},onChange:function(t){return e.props.updateSliders(t,"acousticness")}}))),s.a.createElement(C.a,{title:"Danceability describes how suitable a track is for dancing based on a combination of musical elements including tempo, rhythm stability, beat strength, and overall regularity."},s.a.createElement("div",null,s.a.createElement(j.a,{disableAnimation:!0,className:"slider"},"Danceability: ",this.props.danceability),s.a.createElement(E.a,{minValue:0,maxValue:1,step:.01,value:a,formatLabel:function(e){return""},onChange:function(t){return e.props.updateSliders(t,"danceability")}}))),s.a.createElement(C.a,{title:"Energy represents a perceptual measure of intensity and activity. Typically, energetic tracks feel fast, loud, and noisy. Perceptual features contributing to this attribute include dynamic range, perceived loudness, timbre, onset rate, and general entropy."},s.a.createElement("div",null,s.a.createElement(j.a,{disableAnimation:!0,className:"slider"},"Energy: ",this.props.energy),s.a.createElement(E.a,{minValue:0,maxValue:1,step:.01,value:n,formatLabel:function(e){return""},onChange:function(t){return e.props.updateSliders(t,"energy")}}))),s.a.createElement(C.a,{title:"Instrumentalness predicts whether a track contains no vocals. \u201cOoh\u201d and \u201caah\u201d sounds are treated as instrumental in this context. Values above 0.5 are intended to represent instrumental tracks, but confidence is higher as the value approaches 1.0."},s.a.createElement("div",null,s.a.createElement(j.a,{disableAnimation:!0,className:"slider"},"Instrumentalness: ",this.props.instrumentalness),s.a.createElement(E.a,{minValue:0,maxValue:1,step:.01,value:i,formatLabel:function(e){return""},onChange:function(t){return e.props.updateSliders(t,"instrumentalness")}}))),s.a.createElement(C.a,{title:"Valence is a measure describing the musical positiveness conveyed by a track. Tracks with high valence sound more positive (e.g. happy, cheerful, euphoric), while tracks with low valence sound more negative (e.g. sad, depressed, angry)."},s.a.createElement("div",null,s.a.createElement(j.a,{disableAnimation:!0,className:"slider"},"Valence: ",this.props.valence),s.a.createElement(E.a,{minValue:0,maxValue:1,step:.01,value:r,formatLabel:function(e){return""},onChange:function(t){return e.props.updateSliders(t,"valence")}}))))}}]),t}(n.Component),I=a(39),_=a.n(I),x=a(47),L=a.n(x),w=a(26),A=a.n(w),T=a(35),V=a.n(T),R=a(38),U=a.n(R),F=a(36),P=a.n(F),z=a(37),B=a.n(z),D=a(55),G=a.n(D),q=a(46),J=a.n(q),M=a(119),H=a.n(M),K=a(120),Q=a.n(K),W=a(118),X=a.n(W),Y=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).getPlaylist=a.getPlaylist.bind(Object(d.a)(a)),a.handleChange=a.handleChange.bind(Object(d.a)(a)),a.state={error:null,isReturned:!1,spotifyUser:null,playlistNameInputValue:"",playlistUrl:""},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.getUserId()}},{key:"handleChange",value:function(e){this.setState({playlistNameInputValue:e.target.value})}},{key:"buildSongUriArray",value:function(e){var t=[];return e.map(function(e){return t.push(e.uri)}),t}},{key:"getUserId",value:function(){var e=this;this.props.spotify.getMe().then(function(t){e.setState({spotifyUser:t})},function(e){console.error(e)})}},{key:"fillPlaylist",value:function(e){this.props.spotify.addTracksToPlaylist(e,this.buildSongUriArray(this.props.recommendedList)).then(function(){},function(e){console.error(e)})}},{key:"getPlaylist",value:function(){var e=this,t=""!==this.state.playlistNameInputValue?this.state.playlistNameInputValue:"New Playlist";this.props.spotify.createPlaylist(this.state.spotifyUser.id,{name:t+" (Created by Recommender)",public:!0}).then(function(t){e.fillPlaylist(t.id),e.setState({playlistUrl:t.external_urls.spotify})},function(e){console.error(e)})}},{key:"render",value:function(){return null!=this.state.spotifyUser?s.a.createElement("div",{className:"create_playlist",style:{margin:"20px 0"}},s.a.createElement(X.a,{label:"Playlist Name",value:this.state.playlistNameInputValue,onChange:this.handleChange}),s.a.createElement(v.a,{variant:"contained",color:"primary",onClick:this.getPlaylist},"Create Playlist",s.a.createElement(H.a,{className:"rightIcon"})),s.a.createElement("div",null,""!==this.state.playlistUrl?s.a.createElement(v.a,{className:"open_playlist",variant:"contained",href:this.state.playlistUrl,target:"_blank"},"Open Playlist",s.a.createElement(Q.a,{className:"rightIcon"})):s.a.createElement(s.a.Fragment,null))):s.a.createElement("div",null)}}]),t}(n.Component),Z=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).updateRecommended=function(e){a.props.updateRecommended(e)},a.getSeedID=function(e){var t=[];return e.map(function(e,a){return t=t.concat(e.id)}),t},a.getRecommendations=function(){var e=Object(d.a)(a),t={seed_tracks:a.getSeedID(a.props.selectedSongs),target_acousticness:a.props.acousticness,target_danceability:a.props.danceability,target_energy:a.props.energy,target_instrumentalness:a.props.instrumentalness,target_valence:a.props.valence};a.props.spotify.getRecommendations(t,function(t,a){t?console.log(t):(e.updateRecommended(a.tracks),console.log(a.tracks))}),a.createItems()},a.handleClick=function(e,t){_()({headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("access_token"))},url:"https://api.spotify.com/v1/me/player/devices"}).then(function(e){for(var t=0;e.data.devices[t];){if(e.data.devices[t].is_active&&!e.data.devices[t].is_restricted)return e.data.devices[t].id;t++}if("undefined"!==typeof e.data.devices[0])return e.data.devices[0].id;throw Error("Cannot find an available device to play on.")}).then(function(t){_()({headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("access_token"))},url:"https://api.spotify.com/v1/me/player/play",method:"PUT",params:{device_id:t},data:{uris:[e]}}).catch(function(e){if(console.log(e),e.response.status)e.response.status})}).catch(function(e){console.log(e),window.open(t,"_blank")})},a.createItems=function(){var e=a.props.recommendedList.map(function(e,t){return s.a.createElement(V.a,{key:t,alignItems:"flex-start",className:"listItem"},s.a.createElement(P.a,null,s.a.createElement(B.a,{src:e.album.images[2].url})),s.a.createElement(U.a,{classes:{primary:"overflow",secondary:"overflow"},primary:e.name,secondary:e.artists[0].name}),s.a.createElement(J.a,{color:"primary","aria-label":"Play_Arrow",size:"small"},s.a.createElement(G.a,{onClick:function(){a.handleClick(e.uri,e.external_urls.spotify)}})))});return s.a.createElement(s.a.Fragment,null,s.a.createElement(Y,{spotify:a.props.spotify,recommendedList:a.props.recommendedList}),s.a.createElement(A.a,{className:"songList"},e))},a.render=function(){return s.a.createElement("div",null,s.a.createElement(v.a,{variant:"outlined",color:"primary",onClick:a.getRecommendations},"Get Songs",s.a.createElement(L.a,{className:"rightIcon"})),s.a.createElement("div",null,a.createItems()))},a.getRecommendations=a.getRecommendations.bind(Object(d.a)(a)),a.handleClick=a.handleClick.bind(Object(d.a)(a)),a}return Object(m.a)(t,e),t}(n.Component),$=a(45),ee=a.n($),te=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){a.setState({query:e.target.value})},a.getSearchResults=a.getSearchResults.bind(Object(d.a)(a)),a.state={query:""},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"updateSongList",value:function(e){this.props.updateSongList(e)}},{key:"getSearchResults",value:function(e){e.preventDefault();var t=this;this.props.spotify.searchTracks(this.state.query).then(function(e){console.log(e),t.updateSongList(e.tracks.items)},function(e){console.error(e)})}},{key:"render",value:function(){return s.a.createElement("form",{onSubmit:this.getSearchResults},s.a.createElement(ee.a,{variant:"contained",color:"primary",onChange:this.handleChange,style:{"margin-top":"20px"}},"Get Search",s.a.createElement(L.a,{className:"rightIcon"})),s.a.createElement("br",null),s.a.createElement(v.a,{type:"submit",variant:"outlined",color:"primary",style:{margin:"20px"}},"Get Songs",s.a.createElement(L.a,{className:"rightIcon"})))}}]),t}(n.Component),ae=a(121),ne=a.n(ae),se=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).addSelectedSong=function(e){a.props.addSelectedSong(e)},a.updateSliders=function(e,t){a.props.updateSliders(e,t)},a.handleClick=function(e,t){_()({headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("access_token"))},url:"https://api.spotify.com/v1/me/player/devices"}).then(function(e){for(var t=0;e.data.devices[t];){if(e.data.devices[t].is_active&&!e.data.devices[t].is_restricted)return e.data.devices[t].id;t++}if("undefined"!==typeof e.data.devices[0])return e.data.devices[0].id;throw Error("Cannot find an available device to play on.")}).then(function(t){_()({headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("access_token"))},url:"https://api.spotify.com/v1/me/player/play",method:"PUT",params:{device_id:t},data:{uris:[e]}}).catch(function(e){if(console.log(e),e.response.status)e.response.status})}).catch(function(e){console.log(t),window.open(t,"_blank")})},a.createItems=function(){var e=a.props.songList.map(function(e,t){return s.a.createElement(V.a,{key:t,alignItems:"flex-start",className:"listItem"},s.a.createElement(P.a,null,s.a.createElement(B.a,{src:e.album.images[2].url})),s.a.createElement(U.a,{classes:{primary:"overflow",secondary:"overflow"},primary:e.name,secondary:e.artists[0].name}),s.a.createElement(J.a,{color:"primary","aria-label":"Play_Arrow",size:"small",style:{margin:"0 10px"}},s.a.createElement(G.a,{onClick:function(){a.handleClick(e.uri,e.external_urls.spotify)}})),s.a.createElement(J.a,{color:"primary","aria-label":"Add",size:"small"},s.a.createElement(ne.a,{onClick:function(){a.addSelectedSong(e)}})))});return s.a.createElement(A.a,{className:"songList"},e)},a.render=function(){return s.a.createElement(s.a.Fragment,null,a.createItems())},a.state={},a.handleClick=a.handleClick.bind(Object(d.a)(a)),a}return Object(m.a)(t,e),t}(n.Component),ie=a(123),re=a.n(ie),ce=a(122),oe=a.n(ce),le=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).removeSelectedSong=function(e){a.props.removeSelectedSong(e)},a.addItem=function(){var e=a.props.selectedSongs.map(function(e,t){return s.a.createElement(V.a,{key:t,alignItems:"flex-start",className:"listItem"},s.a.createElement(P.a,null,s.a.createElement(B.a,{src:e.album.images[2].url})),s.a.createElement(U.a,{primary:e.name,secondary:e.album.name}),s.a.createElement(oe.a,{"aria-label":"Delete"},s.a.createElement(re.a,{onClick:function(){a.removeSelectedSong(e)}})))});return s.a.createElement(A.a,{className:"songList"},e)},a.render=function(){return s.a.createElement(s.a.Fragment,null,a.addItem())},a.state={acousticness:[],danceability:[],energy:[],instrumentalness:[],valence:[]},a}return Object(m.a)(t,e),t}(n.Component),ue=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).updateChosenGenres=function(e){a.setState({chosenGenres:e,songListNeedsUpdate:!0})},a.updateSongList=function(e){a.setState({songList:e}),console.log("songList:",e)},a.updateRecommended=function(e){a.setState({recommendedList:e})},a.addSelectedSong=function(e){if(a.state.selectedSongs.length<5&&!1===a.state.selectedSongs.includes(e)){var t=a.state.selectedSongs.concat(e);a.setState({selectedSongs:t},function(){a.recalcValues()})}},a.removeSelectedSong=function(e){var t=Object(h.a)(a.state.selectedSongs),n=t.indexOf(e);-1!==n&&(t.splice(n,1),a.setState({selectedSongs:t},function(){a.recalcValues()}))},a.updateSliders=function(e,t){var n;"NaN"===e&&(e=0),a.setState((n={},Object(p.a)(n,t,parseFloat(e).toFixed(2)),Object(p.a)(n,"songListNeedsUpdate",!0),n))},a.recalcValues=function(){var e=Object(d.a)(a),t=[],n=0,s=0,i=0,r=0,c=0;a.state.selectedSongs.map(function(e,a){return t=t.concat(e.id)}),a.spotify.getAudioFeaturesForTracks(t,function(a,o){var l=t.length;a?console.log(a):(t.length>0&&o.audio_features.map(function(e){null!=e?(n+=e.acousticness,s+=e.danceability,i+=e.energy,r+=e.instrumentalness,c+=e.valence):l--}),n=(n/l).toFixed(2),e.updateSliders(n,"acousticness"),s=(s/l).toFixed(2),e.updateSliders(s,"danceability"),i=(i/l).toFixed(2),e.updateSliders(i,"energy"),r=(r/l).toFixed(2),e.updateSliders(r,"instrumentalness"),c=(c/l).toFixed(2),e.updateSliders(c,"valence"))})},a.spotify=new y.a,a.props.haveToken&&a.spotify.setAccessToken(a.props.token),localStorage.setItem("access_token",a.props.token),a.state={chosenGenres:[],acousticness:.5.toFixed(2),danceability:.5.toFixed(2),energy:.5.toFixed(2),instrumentalness:.5.toFixed(2),valence:.5.toFixed(2),songList:[],recommendedList:[],selectedSongs:[],songListNeedsUpdate:!0},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return this.seedCount=this.state.chosenGenres.length,this.props.haveToken&&this.props.tokenValid?s.a.createElement("div",{className:"bodyContainer"},s.a.createElement("div",{className:"searchBox"},s.a.createElement(te,{spotify:this.spotify,getSearchResults:this.getSearchResults,updateSongList:this.updateSongList}),s.a.createElement(se,{spotify:this.spotify,songList:this.state.songList,addSelectedSong:this.addSelectedSong,selectedSongs:this.state.selectedSongs,acousticness:this.state.acousticness,danceability:this.state.danceability,energy:this.state.energy,instrumentalness:this.state.instrumentalness,valence:this.state.valence,updateSliders:this.updateSliders})),s.a.createElement("div",{className:"recommendBox"},s.a.createElement("div",{className:"selectedBox"},s.a.createElement(le,{spotify:this.spotify,selectedSongs:this.state.selectedSongs,removeSelectedSong:this.removeSelectedSong,acousticness:this.state.acousticness,danceability:this.state.danceability,energy:this.state.energy,instrumentalness:this.state.instrumentalness,valence:this.state.valence})),s.a.createElement(N,{acousticness:this.state.acousticness,danceability:this.state.danceability,energy:this.state.energy,instrumentalness:this.state.instrumentalness,valence:this.state.valence,updateSliders:this.updateSliders}),s.a.createElement(Z,{spotify:this.spotify,selectedSongs:this.state.selectedSongs,removeSelectedSong:this.removeSelectedSong,acousticness:this.state.acousticness,danceability:this.state.danceability,energy:this.state.energy,instrumentalness:this.state.instrumentalness,valence:this.state.valence,updateRecommended:this.updateRecommended,recommendedList:this.state.recommendedList}))):s.a.createElement("div",{className:"bodyContainer"},s.a.createElement(b,null))}}]),t}(n.Component),de=(a(306),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).invalidateToken=a.invalidateToken.bind(Object(d.a)(a)),a.state={haveToken:!!a.props.accessToken,tokenValid:!0},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"invalidateToken",value:function(){this.setState({tokenValid:!1})}},{key:"render",value:function(){return s.a.createElement("div",{className:"App"},s.a.createElement("header",{className:"App-header"},s.a.createElement("h1",null,"Song Recommender"),s.a.createElement("h4",null,"A web app for finding songs of your preference")),s.a.createElement(ue,{token:this.props.accessToken,haveToken:this.state.haveToken,tokenValid:this.state.tokenValid,invalidateToken:this.invalidateToken}))}}]),t}(n.Component));r.a.render(s.a.createElement(de,{accessToken:function(){var e=window.location.hash.match(/#(?:access_token)=([\S\s]*?)&/);return e?e[1]:""}()}),document.getElementById("root"))}},[[125,1,2]]]);
//# sourceMappingURL=main.99ee5395.chunk.js.map