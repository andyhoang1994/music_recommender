(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{125:function(e,t,a){e.exports=a(307)},130:function(e,t,a){},306:function(e,t,a){},307:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(21),i=a.n(r),c=(a(130),a(15)),l=a(22),o=a(17),u=a(16),d=a(19),m=a(18),p=a(69),h=a(124),f=a(116),g=a.n(f),y=a(24),b=a.n(y),v=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"tokenRequestUrl",value:function(){return"https://accounts.spotify.com/authorize?client_id=4a12399447fb43f3a7e85bde067b6743&redirect_uri=http://localhost:3000/callback&response_type=token"}},{key:"render",value:function(){return s.a.createElement(b.a,{variant:"contained",color:"primary",className:"get_token",target:"",href:this.tokenRequestUrl()},"Authorize Spotify")}}]),t}(n.Component),S=a(39),E=a.n(S),k=(a(216),a(27)),j=a.n(k),O=a(40),C=a.n(O),N=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.acousticness,a=this.props.danceability,n=this.props.energy,r=this.props.instrumentalness,i=this.props.valence;return s.a.createElement("div",{className:"sliderContainer"},s.a.createElement(C.a,{title:"Acousticness is a confidence measure of whether a track is acoustic or not"},s.a.createElement("div",null,s.a.createElement(j.a,{disableAnimation:!0,className:"slider"},"Acousticness: ",this.props.acousticness),s.a.createElement(E.a,{minValue:0,maxValue:1,step:.01,value:t,formatLabel:function(e){return""},onChange:function(t){return e.props.updateSliders(t,"acousticness")}}))),s.a.createElement(C.a,{title:"Danceability describes how suitable a track is for dancing based on a combination of musical elements including tempo, rhythm stability, beat strength, and overall regularity."},s.a.createElement("div",null,s.a.createElement(j.a,{disableAnimation:!0,className:"slider"},"Danceability: ",this.props.danceability),s.a.createElement(E.a,{minValue:0,maxValue:1,step:.01,value:a,formatLabel:function(e){return""},onChange:function(t){return e.props.updateSliders(t,"danceability")}}))),s.a.createElement(C.a,{title:"Energy represents a perceptual measure of intensity and activity. Typically, energetic tracks feel fast, loud, and noisy. Perceptual features contributing to this attribute include dynamic range, perceived loudness, timbre, onset rate, and general entropy."},s.a.createElement("div",null,s.a.createElement(j.a,{disableAnimation:!0,className:"slider"},"Energy: ",this.props.energy),s.a.createElement(E.a,{minValue:0,maxValue:1,step:.01,value:n,formatLabel:function(e){return""},onChange:function(t){return e.props.updateSliders(t,"energy")}}))),s.a.createElement(C.a,{title:"Instrumentalness predicts whether a track contains no vocals. \u201cOoh\u201d and \u201caah\u201d sounds are treated as instrumental in this context. Values above 0.5 are intended to represent instrumental tracks, but confidence is higher as the value approaches 1.0."},s.a.createElement("div",null,s.a.createElement(j.a,{disableAnimation:!0,className:"slider"},"Instrumentalness: ",this.props.instrumentalness),s.a.createElement(E.a,{minValue:0,maxValue:1,step:.01,value:r,formatLabel:function(e){return""},onChange:function(t){return e.props.updateSliders(t,"instrumentalness")}}))),s.a.createElement(C.a,{title:"Valence is a measure describing the musical positiveness conveyed by a track. Tracks with high valence sound more positive (e.g. happy, cheerful, euphoric), while tracks with low valence sound more negative (e.g. sad, depressed, angry)."},s.a.createElement("div",null,s.a.createElement(j.a,{disableAnimation:!0,className:"slider"},"Valence: ",this.props.valence),s.a.createElement(E.a,{minValue:0,maxValue:1,step:.01,value:i,formatLabel:function(e){return""},onChange:function(t){return e.props.updateSliders(t,"valence")}}))))}}]),t}(n.Component),x=a(70),I=a.n(x),L=function(e,t){I()({headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("access_token"))},url:"https://api.spotify.com/v1/me/player/devices"}).then(function(e){for(var t=0;e.data.devices[t];){if(e.data.devices[t].is_active&&!e.data.devices[t].is_restricted)return e.data.devices[t].id;t++}if("undefined"!==typeof e.data.devices[0])return e.data.devices[0].id;throw Error("Cannot find an available device to play on.")}).then(function(t){I()({headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("access_token"))},url:"https://api.spotify.com/v1/me/player/play",method:"PUT",params:{device_id:t},data:{uris:[e]}}).catch(function(e){console.log(e),e.response.status&&e.response.status})}).catch(function(e){console.log(t),window.open(t,"_blank")})},w=a(54),_=a.n(w),V=a(26),T=a.n(V),A=a(35),R=a.n(A),F=a(38),U=a.n(F),P=a(36),z=a.n(P),D=a(37),B=a.n(D),q=a(53),G=a.n(q),M=a(45),J=a.n(M),H=a(119),K=a.n(H),Q=a(120),W=a.n(Q),X=a(118),Y=a.n(X),Z=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).componentDidMount=function(){a.getUserId()},a.handleChange=function(e){a.setState({playlistNameInputValue:e.target.value})},a.buildSongUriArray=function(e){var t=[];return e.map(function(e){return t.push(e.uri)}),t},a.getUserId=function(){var e=Object(d.a)(a);a.props.spotify.getMe().then(function(t){e.setState({spotifyUser:t})},function(e){console.error(e)})},a.fillPlaylist=function(e){a.props.spotify.addTracksToPlaylist(e,a.buildSongUriArray(a.props.recommendedList)).then(function(){},function(e){console.error(e)})},a.getPlaylist=function(){var e=Object(d.a)(a),t=""!==a.state.playlistNameInputValue?a.state.playlistNameInputValue:"New Playlist";a.props.spotify.createPlaylist(a.state.spotifyUser.id,{name:t+" (Created by Recommender)",public:!0}).then(function(t){e.fillPlaylist(t.id),e.setState({playlistUrl:t.external_urls.spotify})},function(e){console.error(e)})},a.getPlaylist=a.getPlaylist.bind(Object(d.a)(a)),a.handleChange=a.handleChange.bind(Object(d.a)(a)),a.state={error:null,isReturned:!1,spotifyUser:null,playlistNameInputValue:"",playlistUrl:""},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return null!=this.state.spotifyUser?s.a.createElement("div",{className:"create_playlist",style:{margin:"20px 0"}},s.a.createElement(Y.a,{label:"Playlist Name",value:this.state.playlistNameInputValue,onChange:this.handleChange}),s.a.createElement(b.a,{variant:"contained",color:"primary",onClick:this.getPlaylist},"Create Playlist",s.a.createElement(K.a,{className:"rightIcon"})),s.a.createElement("div",null,""!==this.state.playlistUrl?s.a.createElement(b.a,{className:"open_playlist",variant:"contained",href:this.state.playlistUrl,target:"_blank"},"Open Playlist",s.a.createElement(W.a,{className:"rightIcon"})):s.a.createElement(s.a.Fragment,null))):s.a.createElement(s.a.Fragment,null)}}]),t}(n.Component),$=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).updateRecommended=function(e){a.props.updateRecommended(e)},a.getSeedID=function(e){var t=[];return e.map(function(e,a){return t=t.concat(e.id)}),t},a.getRecommendations=function(){var e=Object(d.a)(a),t={seed_tracks:a.getSeedID(a.props.selectedSongs),target_acousticness:a.props.acousticness,target_danceability:a.props.danceability,target_energy:a.props.energy,target_instrumentalness:a.props.instrumentalness,target_valence:a.props.valence};a.props.spotify.getRecommendations(t,function(t,a){t?console.log(t):(e.updateRecommended(a.tracks),console.log(a.tracks))}),a.createItems()},a.createItems=function(){var e=a.props.recommendedList.map(function(e,t){return s.a.createElement(R.a,{key:t,alignItems:"flex-start",className:"listItem"},s.a.createElement(z.a,null,s.a.createElement(B.a,{src:e.album.images[2].url})),s.a.createElement(U.a,{classes:{primary:"overflow",secondary:"overflow"},primary:e.name,secondary:e.artists[0].name}),s.a.createElement(J.a,{color:"primary","aria-label":"Play_Arrow",size:"small"},s.a.createElement(G.a,{onClick:function(){L(e.uri,e.external_urls.spotify)}})))});return s.a.createElement(s.a.Fragment,null,s.a.createElement(Z,{spotify:a.props.spotify,recommendedList:a.props.recommendedList}),s.a.createElement(T.a,{className:"songList"},e))},a.render=function(){return s.a.createElement("div",null,s.a.createElement(b.a,{variant:"outlined",color:"primary",onClick:a.getRecommendations},"Get Songs",s.a.createElement(_.a,{className:"rightIcon"})),s.a.createElement("div",null,a.createItems()))},a.getRecommendations=a.getRecommendations.bind(Object(d.a)(a)),a}return Object(m.a)(t,e),t}(n.Component),ee=a(44),te=a.n(ee),ae=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){a.setState({query:e.target.value})},a.render=function(){return s.a.createElement("form",{onSubmit:a.getSearchResults},s.a.createElement(te.a,{variant:"contained",color:"primary",placeholder:"Enter an artist or title",onChange:a.handleChange,style:{"margin-top":"20px"}}),s.a.createElement("br",null),s.a.createElement(b.a,{type:"submit",variant:"outlined",color:"primary",style:{margin:"20px"}},"Search",s.a.createElement(_.a,{className:"rightIcon"})))},a.getSearchResults=a.getSearchResults.bind(Object(d.a)(a)),a.state={query:""},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"updateSongList",value:function(e){this.props.updateSongList(e)}},{key:"getSearchResults",value:function(e){e.preventDefault();var t=this;this.props.spotify.searchTracks(this.state.query).then(function(e){console.log(e),t.updateSongList(e.tracks.items)},function(e){console.error(e)})}}]),t}(n.Component),ne=a(121),se=a.n(ne),re=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).addSelectedSong=function(e){a.props.addSelectedSong(e)},a.updateSliders=function(e,t){a.props.updateSliders(e,t)},a.createItems=function(){var e=a.props.songList.map(function(e,t){return s.a.createElement(R.a,{key:t,alignItems:"flex-start",className:"listItem"},s.a.createElement(z.a,null,s.a.createElement(B.a,{src:e.album.images[2].url})),s.a.createElement(U.a,{classes:{primary:"overflow",secondary:"overflow"},primary:e.name,secondary:e.artists[0].name}),s.a.createElement(J.a,{color:"primary","aria-label":"Play_Arrow",size:"small",style:{margin:"0 10px"}},s.a.createElement(G.a,{onClick:function(){L(e.uri,e.external_urls.spotify)}})),s.a.createElement(J.a,{color:"primary","aria-label":"Add",size:"small"},s.a.createElement(se.a,{onClick:function(){a.addSelectedSong(e)}})))});return s.a.createElement(T.a,{className:"songList"},e)},a.render=function(){return s.a.createElement(s.a.Fragment,null,a.createItems())},a}return Object(m.a)(t,e),t}(n.Component),ie=a(123),ce=a.n(ie),le=a(122),oe=a.n(le),ue=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).removeSelectedSong=function(e){a.props.removeSelectedSong(e)},a.addItem=function(){var e=a.props.selectedSongs.map(function(e,t){return s.a.createElement(R.a,{key:t,alignItems:"flex-start",className:"listItem"},s.a.createElement(z.a,null,s.a.createElement(B.a,{src:e.album.images[2].url})),s.a.createElement(U.a,{primary:e.name,secondary:e.album.name}),s.a.createElement(oe.a,{"aria-label":"Delete"},s.a.createElement(ce.a,{onClick:function(){a.removeSelectedSong(e)}})))});return s.a.createElement(T.a,{className:"songList"},e)},a.render=function(){return s.a.createElement(s.a.Fragment,null,a.addItem())},a.state={acousticness:[],danceability:[],energy:[],instrumentalness:[],valence:[]},a}return Object(m.a)(t,e),t}(n.Component),de=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).updateSongList=function(e){a.setState({songList:e}),console.log("songList:",e)},a.updateRecommended=function(e){a.setState({recommendedList:e})},a.addSelectedSong=function(e){if(a.state.selectedSongs.length<5&&!1===a.state.selectedSongs.includes(e)){var t=a.state.selectedSongs.concat(e);a.setState({selectedSongs:t},function(){a.recalcValues()})}},a.removeSelectedSong=function(e){var t=Object(h.a)(a.state.selectedSongs),n=t.indexOf(e);-1!==n&&(t.splice(n,1),a.setState({selectedSongs:t},function(){a.recalcValues()}))},a.updateSliders=function(e,t){var n;"NaN"===e&&(e=0),a.setState((n={},Object(p.a)(n,t,parseFloat(e).toFixed(2)),Object(p.a)(n,"songListNeedsUpdate",!0),n))},a.recalcValues=function(){var e=Object(d.a)(a),t=[],n=0,s=0,r=0,i=0,c=0;a.state.selectedSongs.map(function(e,a){return t=t.concat(e.id)}),a.spotify.getAudioFeaturesForTracks(t,function(a,l){var o=t.length;a?console.log(a):(t.length>0&&l.audio_features.map(function(e){null!=e?(n+=e.acousticness,s+=e.danceability,r+=e.energy,i+=e.instrumentalness,c+=e.valence):o--}),n=(n/o).toFixed(2),e.updateSliders(n,"acousticness"),s=(s/o).toFixed(2),e.updateSliders(s,"danceability"),r=(r/o).toFixed(2),e.updateSliders(r,"energy"),i=(i/o).toFixed(2),e.updateSliders(i,"instrumentalness"),c=(c/o).toFixed(2),e.updateSliders(c,"valence"))})},a.spotify=new g.a,a.props.haveToken&&a.spotify.setAccessToken(a.props.token),localStorage.setItem("access_token",a.props.token),a.state={chosenGenres:[],acousticness:.5.toFixed(2),danceability:.5.toFixed(2),energy:.5.toFixed(2),instrumentalness:.5.toFixed(2),valence:.5.toFixed(2),songList:[],recommendedList:[],selectedSongs:[],songListNeedsUpdate:!0},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return this.seedCount=this.state.chosenGenres.length,this.props.haveToken&&this.props.tokenValid?s.a.createElement("div",{className:"bodyContainer"},s.a.createElement("div",{className:"searchBox"},s.a.createElement(ae,{spotify:this.spotify,getSearchResults:this.getSearchResults,updateSongList:this.updateSongList}),s.a.createElement(re,{spotify:this.spotify,songList:this.state.songList,addSelectedSong:this.addSelectedSong,selectedSongs:this.state.selectedSongs,acousticness:this.state.acousticness,danceability:this.state.danceability,energy:this.state.energy,instrumentalness:this.state.instrumentalness,valence:this.state.valence,updateSliders:this.updateSliders})),s.a.createElement("div",{className:"recommendBox"},s.a.createElement("div",{className:"selectedBox"},s.a.createElement(ue,{spotify:this.spotify,selectedSongs:this.state.selectedSongs,removeSelectedSong:this.removeSelectedSong,acousticness:this.state.acousticness,danceability:this.state.danceability,energy:this.state.energy,instrumentalness:this.state.instrumentalness,valence:this.state.valence})),s.a.createElement(N,{acousticness:this.state.acousticness,danceability:this.state.danceability,energy:this.state.energy,instrumentalness:this.state.instrumentalness,valence:this.state.valence,updateSliders:this.updateSliders}),s.a.createElement($,{spotify:this.spotify,selectedSongs:this.state.selectedSongs,removeSelectedSong:this.removeSelectedSong,acousticness:this.state.acousticness,danceability:this.state.danceability,energy:this.state.energy,instrumentalness:this.state.instrumentalness,valence:this.state.valence,updateRecommended:this.updateRecommended,recommendedList:this.state.recommendedList}))):s.a.createElement("div",{className:"bodyContainer"},s.a.createElement(v,null))}}]),t}(n.Component),me=(a(306),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).invalidateToken=a.invalidateToken.bind(Object(d.a)(a)),a.state={haveToken:!!a.props.accessToken,tokenValid:!0},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"invalidateToken",value:function(){this.setState({tokenValid:!1})}},{key:"render",value:function(){return s.a.createElement("div",{className:"App"},s.a.createElement("header",{className:"App-header"},s.a.createElement("h1",null,"Music Recommender"),s.a.createElement("h4",null,"A web app for finding songs of your preference")),s.a.createElement(de,{token:this.props.accessToken,haveToken:this.state.haveToken,tokenValid:this.state.tokenValid,invalidateToken:this.invalidateToken}))}}]),t}(n.Component));i.a.render(s.a.createElement(me,{accessToken:function(){var e=window.location.hash.match(/#(?:access_token)=([\S\s]*?)&/);return e?e[1]:""}()}),document.getElementById("root"))}},[[125,1,2]]]);
//# sourceMappingURL=main.c978f56a.chunk.js.map